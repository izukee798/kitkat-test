local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Izukee Test Script",
   LoadingTitle = "Testing",
   LoadingSubtitle = "Izukee",
   Theme = "Default",
   ToggleUIKeybind = "K",
   ConfigurationSaving = {
      Enabled = true,
      FileName = "Test Hub"
   },
   KeySystem = false
})

local Tab = Window:CreateTab("Main", 4483362458)

-----------------------
-- Infinite Jump Toggle
-----------------------
local infiniteJumpEnabled = false
local jumpConnection = nil

Tab:CreateToggle({
   Name = "Infinite Jump",
   CurrentValue = false,
   Callback = function(state)
      infiniteJumpEnabled = state

      if infiniteJumpEnabled then
         local Player = game.Players.LocalPlayer
         local UserInputService = game:GetService("UserInputService")

         if not jumpConnection then
            jumpConnection = UserInputService.JumpRequest:Connect(function()
               local character = Player.Character or Player.CharacterAdded:Wait()
               local humanoid = character:FindFirstChildOfClass("Humanoid")
               if humanoid then
                  humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
               end
            end)
         end
      else
         if jumpConnection then
            jumpConnection:Disconnect()
            jumpConnection = nil
         end
      end
   end
})

-----------------------
-- WalkSpeed Slider
-----------------------
local Player = game.Players.LocalPlayer
local humanoid = nil
local defaultSpeed = 16

local function onCharacterAdded(char)
   humanoid = char:WaitForChild("Humanoid")
   humanoid.WalkSpeed = defaultSpeed
end

Player.CharacterAdded:Connect(onCharacterAdded)

if Player.Character then
   onCharacterAdded(Player.Character)
end

local Slider = Tab:CreateSlider({
   Name = "Walkspeed 1",
   Range = {0, 100},
   Increment = 1,
   Suffix = "Speed",
   CurrentValue = 16,
   Flag = "Slider1", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
   Callback = function(Value)
   
        if humanoid then
             humanoid.WalkSpeed = Value
        end
     end
})

local Player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")



local Player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local flying = false
local flySpeed = 50
local velocity = nil
local gyroscope = nil
local flyConn = nil

local function startFly()
	local character = Player.Character or Player.CharacterAdded:Wait()
	local hrp = character:WaitForChild("HumanoidRootPart")

	velocity = Instance.new("BodyVelocity")
	velocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
	velocity.Velocity = Vector3.zero
	velocity.P = 1250
	velocity.Parent = hrp

	gyroscope = Instance.new("BodyGyro")
	gyroscope.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
	gyroscope.P = 3000
	gyroscope.CFrame = hrp.CFrame
	gyroscope.Parent = hrp

	local direction = Vector3.zero

	flyConn = RunService.RenderStepped:Connect(function()
		if not flying then return end

		local camCF = workspace.CurrentCamera.CFrame
		direction = Vector3.zero

		if UIS:IsKeyDown(Enum.KeyCode.W) then
			direction += camCF.LookVector
		end
		if UIS:IsKeyDown(Enum.KeyCode.S) then
			direction -= camCF.LookVector
		end
		if UIS:IsKeyDown(Enum.KeyCode.A) then
			direction -= camCF.RightVector
		end
		if UIS:IsKeyDown(Enum.KeyCode.D) then
			direction += camCF.RightVector
		end
		if UIS:IsKeyDown(Enum.KeyCode.Space) then
			direction += camCF.UpVector
		end
		if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then
			direction -= camCF.UpVector
		end

		if velocity and direction.Magnitude > 0 then
			velocity.Velocity = direction.Unit * flySpeed
		else
			velocity.Velocity = Vector3.zero
		end

		if gyroscope then
			gyroscope.CFrame = camCF
		end
	end)
end

local function stopFly()
	flying = false
	if flyConn then flyConn:Disconnect() end
	if velocity then velocity:Destroy() end
	if gyroscope then gyroscope:Destroy() end
end

-- Add this to your Rayfield tab
Tab:CreateToggle({
	Name = "Fly",
	CurrentValue = false,
	Flag = "FlyToggle",
	Callback = function(state)
		flying = state
		if flying then
			startFly()
		else
			stopFly()
		end
	end,
})

-- Noclip variables
local noclipEnabled = false
local noclipConnection = nil

local function startNoclip()
    noclipEnabled = true
    local character = Player.Character or Player.CharacterAdded:Wait()

    noclipConnection = RunService.Stepped:Connect(function()
        if noclipEnabled then
            for _, part in pairs(character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end)
end

local function stopNoclip()
    noclipEnabled = false
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
    end

    local character = Player.Character
    if character then
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

-- Fly Toggle
Tab:CreateToggle({
    Name = "Fly",
    CurrentValue = false,
    Flag = "FlyToggle",
    Callback = function(value)
        if value then
            startFly()
        else
            stopFly()
        end
    end
})

-- Noclip Toggle
Tab:CreateToggle({
    Name = "Noclip",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = function(value)
        if value then
            startNoclip()
        else
            stopNoclip()
        end
    end
})
